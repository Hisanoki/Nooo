-- Hàm tạo input field với góc bo tròn
local function createInputField(text, placeholder, position, parent)
	local input = Instance.new("TextBox")
	input.Size = UDim2.new(1, 0, 0, 30)
	input.Position = position
	input.PlaceholderText = placeholder or ""
	input.Text = text or ""
	input.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	input.BackgroundTransparency = 0.7
	input.TextColor3 = Color3.new(1, 1, 1)
	input.Font = Enum.Font.Gotham
	input.TextSize = 14
	input.BorderSizePixel = 0
	input.Parent = parent

	local inputCorner = Instance.new("UICorner")
	inputCorner.CornerRadius = UDim.new(0, 4)
	inputCorner.Parent = input

	return input
end

-- Hàm tạo label trong suốt
local function createTransparentLabel(text, position, parent)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, 0, 0, 20)
	label.Position = position
	label.BackgroundTransparency = 1
	label.Text = text or ""
	label.TextColor3 = Color3.fromRGB(200, 200, 200)
	label.Font = Enum.Font.Gotham
	label.TextSize = 12
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = parent

	return label
end

-- Xóa GUI cũ nếu tồn tại để tránh lỗi khi chạy lại script
local oldGui = game.CoreGui:FindFirstChild("Mobile_ESP_GUI")
if oldGui then
	oldGui:Destroy()
end

-- UI SETUP
local gui = Instance.new("ScreenGui")
gui.Name = "Mobile_ESP_GUI"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = game.CoreGui

-- Main transparent container
local mainContainer = Instance.new("Frame")
mainContainer.Size = UDim2.new(0, 300, 0, 40)
mainContainer.Position = UDim2.new(0.5, -150, 0, 10)
mainContainer.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainContainer.BackgroundTransparency = 0.7
mainContainer.BorderSizePixel = 0
mainContainer.Active = true
mainContainer.Draggable = true
mainContainer.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainContainer

-- Toggle button to show/hide main UI
local toggleUIButton = Instance.new("TextButton")
toggleUIButton.Size = UDim2.new(0, 120, 0, 30)
toggleUIButton.Position = UDim2.new(0.5, -60, 0.5, -15)
toggleUIButton.Text = "☰ Open Menu"
toggleUIButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleUIButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleUIButton.BackgroundTransparency = 0.7
toggleUIButton.BorderSizePixel = 0
toggleUIButton.Font = Enum.Font.Gotham
toggleUIButton.TextSize = 14
toggleUIButton.Parent = mainContainer

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 6)
buttonCorner.Parent = toggleUIButton

-- Main UI Frame (initially hidden)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 350)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -175)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BackgroundTransparency = 0.7
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = gui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 8)
mainCorner.Parent = mainFrame

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "ESP & Hitbox Manager"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = mainFrame

-- Close button
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -30, 0, 0)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundTransparency = 1
closeButton.BorderSizePixel = 0
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 16
closeButton.Parent = mainFrame

-- Two panels as requested
local leftPanel = Instance.new("ScrollingFrame")
leftPanel.Size = UDim2.new(0.45, 0, 1, -40)
leftPanel.Position = UDim2.new(0, 5, 0, 35)
leftPanel.BackgroundTransparency = 1
leftPanel.BorderSizePixel = 0
leftPanel.ScrollBarThickness = 4
leftPanel.CanvasSize = UDim2.new(0, 0, 0, 0)
leftPanel.Parent = mainFrame

-- HITBOX INPUT UI
local hitboxLabel = createTransparentLabel("Hitbox Size (nhập số bất kỳ):", UDim2.new(0, 0, 0, 0), leftPanel)
local hitboxInput = createInputField("", "Nhập số...", UDim2.new(0, 0, 0, 22), leftPanel)

-- Sự kiện cho nút toggle để mở/đóng mainFrame
toggleUIButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
end)

-- Sự kiện cho nút close để đóng mainFrame
closeButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

-- Xử lý thay đổi hitbox khi nhập giá trị mới
hitboxInput.FocusLost:Connect(function(enterPressed)
	local value = hitboxInput.Text
	local num = tonumber(value)
	if num and num > 0 then
		local hitbox = game:GetService("ReplicatedStorage"):FindFirstChild("Hitbox")
		if hitbox and hitbox:IsA("Part") then
			-- Đảm bảo không giới hạn số, resize hitbox theo giá trị nhập
			hitbox.Size = Vector3.new(num, num, num)
			hitboxInput.TextColor3 = Color3.fromRGB(0,255,0)
			hitboxInput.Text = tostring(num)
		else
			hitboxInput.TextColor3 = Color3.fromRGB(255,0,0)
			hitboxInput.Text = "Không tìm thấy Hitbox!"
		end
	else
		hitboxInput.TextColor3 = Color3.fromRGB(255,0,0)
		hitboxInput.Text = "Nhập số hợp lệ!"
	end
	task.wait(1)
	hitboxInput.TextColor3 = Color3.new(1,1,1)
	hitboxInput.Text = ""
end)
