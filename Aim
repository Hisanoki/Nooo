local _={}
local a=game:GetService("Players")
local b=game:GetService("StarterGui")
local c=game:GetService("RunService")
local d=game:GetService("Teams")
local e=a.LocalPlayer

local function f(g,h,i)
    b:SetCore("SendNotification",{Title=g;Text=h;Duration=i})
end

f("Made By Phongpro","haxczğŸ˜",5)
task.wait()

local j=game.Players.LocalPlayer
local k=game:GetService("UserInputService")
local l=game:GetService("RunService")

-- Biáº¿n Ä‘á»ƒ lÆ°u má»¥c tiÃªu hiá»‡n táº¡i
local currentTarget = nil
local targetAlive = false
local isMoving = false
local lastMoveTime = 0

local m=Instance.new("ScreenGui")
m.Parent=j:WaitForChild("PlayerGui")
m.ResetOnSpawn=false

local n=Instance.new("Frame")
n.Size=UDim2.new(0,99,0,44)
n.Position=UDim2.new(0,115,0,49)
n.AnchorPoint=Vector2.new(0.5,1)
n.BackgroundColor3=Color3.fromRGB(0,0,0)
n.BackgroundTransparency=0.2
n.Active=true
n.Parent=m

local o=Instance.new("UICorner")
o.CornerRadius=UDim.new(0.8,0)
o.Parent=n

local p=Instance.new("TextButton")
p.Size=UDim2.new(1,0,1,0)
p.Text="Aim Assist"
p.BackgroundTransparency=1
p.TextColor3=Color3.fromRGB(255,255,255)
p.TextSize=10
p.Parent=n

local q=Instance.new("UIStroke")
q.Thickness=2
q.Color=Color3.fromRGB(255,255,0)
q.Enabled=false
q.Parent=n

local aimCircle=Instance.new("Frame")
aimCircle.Size=UDim2.new(0,144,0,144)
aimCircle.Position=UDim2.new(0.5,-1,0.5,-20)
aimCircle.AnchorPoint=Vector2.new(0.5,0.5)
aimCircle.BackgroundTransparency=1
aimCircle.Parent=m

local aimOutline=Instance.new("UIStroke")
aimOutline.Thickness=2
aimOutline.Color=Color3.fromRGB(1,0,0)
aimOutline.Parent=aimCircle

local aimCorner=Instance.new("UICorner")
aimCorner.CornerRadius=UDim.new(1,0)
aimCorner.Parent=aimCircle

-- HÃ m kiá»ƒm tra náº¿u má»¥c tiÃªu lÃ  enemy
local function s(t)
    if game:GetService("Teams") and #game:GetService("Teams"):GetTeams()>1 then
        local u=j.Team
        local v=t.Team
        return u~=nil and v~=nil and u~=v
    else
        return t~=j
    end
end

-- HÃ m kiá»ƒm tra má»¥c tiÃªu cÃ²n sá»‘ng khÃ´ng
local function isTargetAlive(target)
    if not target then return false end
    if not target.Character then return false end
    local humanoid = target.Character:FindFirstChild("Humanoid")
    return humanoid and humanoid.Health > 0
end

-- HÃ m chá»n má»¥c tiÃªu má»›i (bá» kiá»ƒm tra line of sight)
local function selectNewTarget()
    local F=nil
    local G=math.huge
    local H=j.Character
    
    if not H then return nil end
    
    local I=H:FindFirstChild("HumanoidRootPart")
    if not I then return nil end
    
    local cam=workspace.CurrentCamera
    local aimCenter=aimCircle.AbsolutePosition+(aimCircle.AbsoluteSize/2)
    local aimRadius=aimCircle.AbsoluteSize.X/2
    
    for J,K in pairs(game.Players:GetPlayers()) do
        if s(K) and isTargetAlive(K) then
            local L=K.Character
            local M=L:FindFirstChild("HumanoidRootPart")
            if M then
                local screenPos,onScreen=cam:WorldToScreenPoint(M.Position)
                if screenPos.Z > 0 then -- Äáº£m báº£o má»¥c tiÃªu á»Ÿ phÃ­a trÆ°á»›c camera
                    local dist=(Vector2.new(screenPos.X,screenPos.Y)-aimCenter).Magnitude
                    
                    if onScreen and dist<=aimRadius and dist<G then
                        G=dist
                        F=K
                    end
                end
            end
        end
    end
    
    return F
end

-- HÃ m reset khi má»¥c tiÃªu cháº¿t
local function resetAimAssist()
    currentTarget = nil
    targetAlive = false
    q.Enabled = false
    p.Text = "Aim Assist"
end

-- HÃ m quay camera vá» má»¥c tiÃªu ká»ƒ cáº£ khi á»Ÿ sau lÆ°ng
local function aimAtTarget(target)
    if not target or not target.Character then return end
    
    local targetChar = target.Character
    local targetRoot = targetChar:FindFirstChild("HumanoidRootPart")
    local humanoid = targetChar:FindFirstChild("Humanoid")
    
    if not targetRoot or not humanoid or humanoid.Health <= 0 then
        resetAimAssist()
        return
    end
    
    local localChar = j.Character
    if not localChar then return end
    
    local localRoot = localChar:FindFirstChild("HumanoidRootPart")
    if not localRoot then return end
    
    local cam = workspace.CurrentCamera
    if not cam then return end
    
    -- Kiá»ƒm tra náº¿u ngÆ°á»i chÆ¡i Ä‘ang di chuyá»ƒn (mobile joystick)
    local currentTime = tick()
    if isMoving and (currentTime - lastMoveTime) < 0.5 then
        -- Náº¿u Ä‘ang di chuyá»ƒn, khÃ´ng can thiá»‡p camera
        return
    end
    
    -- TÃ­nh toÃ¡n hÆ°á»›ng Ä‘áº¿n má»¥c tiÃªu
    local targetPosition = targetRoot.Position
    
    -- Äiá»u chá»‰nh cho má»¥c tiÃªu á»Ÿ sau lÆ°ng
    -- Náº¿u má»¥c tiÃªu á»Ÿ phÃ­a sau, quay 180 Ä‘á»™
    local toTarget = (targetPosition - localRoot.Position).Unit
    local lookVector = cam.CFrame.LookVector
    
    -- Kiá»ƒm tra gÃ³c giá»¯a hÆ°á»›ng nhÃ¬n vÃ  hÆ°á»›ng Ä‘áº¿n má»¥c tiÃªu
    local dot = lookVector:Dot(toTarget)
    
    -- Náº¿u má»¥c tiÃªu á»Ÿ phÃ­a sau (gÃ³c > 90 Ä‘á»™)
    if dot < 0 then
        -- Quay camera vá» phÃ­a má»¥c tiÃªu nhanh hÆ¡n
        local rotationSpeed = 0.5 -- TÄƒng tá»‘c Ä‘á»™ quay khi má»¥c tiÃªu á»Ÿ sau
        local targetCFrame = CFrame.new(cam.CFrame.Position, targetPosition)
        cam.CFrame = cam.CFrame:Lerp(targetCFrame, rotationSpeed)
    else
        -- Má»¥c tiÃªu á»Ÿ phÃ­a trÆ°á»›c, aim bÃ¬nh thÆ°á»ng
        local targetCFrame = CFrame.new(cam.CFrame.Position, targetPosition)
        cam.CFrame = cam.CFrame:Lerp(targetCFrame, 0.3)
    end
end

-- Khi click button
local r=false
p.MouseButton1Click:Connect(function()
    if not r then
        -- Báº­t aim assist
        r = true
        q.Enabled = true
        p.Text = "Aim Assist: ON"
        
        -- Chá»n má»¥c tiÃªu má»›i
        currentTarget = selectNewTarget()
        
        if not currentTarget then
            -- Náº¿u khÃ´ng tÃ¬m tháº¥y má»¥c tiÃªu, tÃ¬m láº¡i trong pháº¡m vi lá»›n hÆ¡n
            -- TÃ¬m ngÆ°á»i chÆ¡i gáº§n nháº¥t khÃ´ng phÃ¢n biá»‡t trong vÃ²ng trÃ²n
            local closestTarget = nil
            local closestDist = math.huge
            local localChar = j.Character
            local localRoot = localChar and localChar:FindFirstChild("HumanoidRootPart")
            
            if localRoot then
                for _, player in pairs(game.Players:GetPlayers()) do
                    if s(player) and isTargetAlive(player) then
                        local targetChar = player.Character
                        local targetRoot = targetChar and targetChar:FindFirstChild("HumanoidRootPart")
                        
                        if targetRoot then
                            local dist = (targetRoot.Position - localRoot.Position).Magnitude
                            if dist < closestDist then
                                closestDist = dist
                                closestTarget = player
                            end
                        end
                    end
                end
            end
            
            currentTarget = closestTarget
        end
        
        if currentTarget then
            targetAlive = isTargetAlive(currentTarget)
            f("Aim Assist", "ÄÃ£ ghim: " .. currentTarget.Name, 2)
            f("ThÃ´ng tin", "Ghim xuyÃªn tÆ°á»ng & tá»± quay camera", 3)
        else
            -- Náº¿u váº«n khÃ´ng tÃ¬m tháº¥y má»¥c tiÃªu, táº¯t luÃ´n
            r = false
            q.Enabled = false
            p.Text = "Aim Assist"
            f("Aim Assist", "KhÃ´ng tÃ¬m tháº¥y má»¥c tiÃªu!", 2)
        end
    else
        -- Táº¯t aim assist
        r = false
        resetAimAssist()
    end
end)

-- Render loop
l.RenderStepped:Connect(function()
    if r and currentTarget then
        -- Kiá»ƒm tra má»¥c tiÃªu cÃ²n sá»‘ng khÃ´ng
        if not isTargetAlive(currentTarget) then
            resetAimAssist()
            f("Aim Assist", "Má»¥c tiÃªu Ä‘Ã£ cháº¿t!", 2)
            
            -- Tá»± Ä‘á»™ng tÃ¬m má»¥c tiÃªu má»›i
            local newTarget = selectNewTarget()
            if newTarget then
                currentTarget = newTarget
                targetAlive = true
                f("Aim Assist", "ÄÃ£ chuyá»ƒn sang: " .. newTarget.Name, 2)
            end
            return
        end
        
        -- Aim vÃ o má»¥c tiÃªu (xuyÃªn váº­t cáº£n vÃ  tá»± quay khi á»Ÿ sau lÆ°ng)
        aimAtTarget(currentTarget)
    end
end)

-- Di chuyá»ƒn UI
local U=false
local V=Vector2.new(0,0)
local W=UDim2.new(0,0,0,0)

n.InputBegan:Connect(function(X)
    if X.UserInputType==Enum.UserInputType.MouseButton1 or X.UserInputType==Enum.UserInputType.Touch then
        U=true
        V=X.Position
        W=n.Position
    end
end)

n.InputChanged:Connect(function(X)
    if (X.UserInputType==Enum.UserInputType.MouseMovement or X.UserInputType==Enum.UserInputType.Touch) and U then
        local Y=X.Position-V
        n.Position=UDim2.new(W.X.Scale, W.X.Offset+Y.X, W.Y.Scale, W.Y.Offset+Y.Y)
    end
end)

k.InputEnded:Connect(function(X)
    if X.UserInputType==Enum.UserInputType.MouseButton1 or X.UserInputType==Enum.UserInputType.Touch then
        U=false
    end
end)

-- Tá»± Ä‘á»™ng reset náº¿u ngÆ°á»i chÆ¡i cháº¿t
game:GetService("Players").LocalPlayer.CharacterAdded:Connect(function()
    resetAimAssist()
end)

-- ThÃªm phÃ­m táº¯t Ä‘á»ƒ chuyá»ƒn má»¥c tiÃªu (VÃ­ dá»¥: phÃ­m T)
k.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.T and r then
        local newTarget = selectNewTarget()
        if newTarget and newTarget ~= currentTarget then
            currentTarget = newTarget
            f("Aim Assist", "Chuyá»ƒn sang: " .. newTarget.Name, 1)
        end
    end
end)

-- PhÃ¡t hiá»‡n di chuyá»ƒn trÃªn mobile
k.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        isMoving = true
        lastMoveTime = tick()
    end
end)

k.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        isMoving = true
        lastMoveTime = tick()
    end
end)

k.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        isMoving = false
    end
end)

-- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o hÆ°á»›ng dáº«n
task.wait(1)
f("HÆ°á»›ng dáº«n", "Click nÃºt Ä‘á»ƒ báº­t/táº¯t aim", 3)
f("PhÃ­m táº¯t", "Nháº¥n T Ä‘á»ƒ chuyá»ƒn má»¥c tiÃªu", 3)
